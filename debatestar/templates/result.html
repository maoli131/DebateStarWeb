{% extends 'base.html' %}

<!--Template for textAnalytics page: analyze user input text -->
{% block header %}
{% endblock %}

{% block content %}

    <section class="bg-dark text-light header-inner p-0 jarallax position-relative" data-jarallax data-speed="0.2" data-overlay>
      <img src="https://images.unsplash.com/photo-1544531586-fde5298cdd40?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2250&q=80" alt="Image" class="jarallax-img opacity-40">
      <div class="container py-0">
        <div class="row my-4 my-md-6" data-aos="fade-up">
          <div class="col-lg-9 col-xl-8">
            <h1 class="display-4">Text Analytics</h1>
            <p class="lead mb-0">Interact with our advanced NLP engine by providing any debate speeches scripts. Our model can intelligently analyze their persuasiveness.</p>
          </div>
        </div>
      </div>
      <div class="divider">
        <img src=" {{ url_for('static', filename='img/dividers/divider-2.svg') }} " alt="graphical divider" data-inject-svg />
      </div>
    </section>

    <section>
      <div class="container">
        <div class="row justify-content-center mb-6">
          <div class="col-xl-8 col-lg-9">
            <h2 class="h1 text-center">Analysis Completed</h2>
            <p class="lead text-align-start">
              Our NLP engine extracted relevant information from both sides of debate and then encoded language and structure features
              with tailored GloVe embedding. It applied LSTM network to summerize the main points, evaluate similarity and finally determine the persuasiveness. 
            </p>
          </div>
        </div>
        <div class="row justify-content-center mb-3">
          <div class="col-md-9">
            <div class="card card-body flex-row py-4">
                <div class="icon-round icon-round-lg bg-primary-2">
                    <img class="icon bg-primary-2" src="{{ url_for('static', filename='img/icons/theme/devices/display-1.svg') }}" alt="display-1 icon" data-inject-svg />
                </div>
                <div class="ml-3">
                    <h4>Topic</h4>
                    <div class="avatar-author d-block">
                        <span>{{ debate['topic'] }}</span>
                    </div>
                </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="NaN">
            <div class="card card-body align-items-center ">
              <div class="pt-md-2">
                <h4>For Side</h4>
              </div>
              <div class="d-flex align-items-start pb-md-2">
                <span class="display-4 mb-0">{{ rate['for'] }}</span>
                <span class="h3">%</span>
              </div>
              <span class="text-small text-muted">winning rate</span>
              <div class="flex-grow-1">
                <p><br>{{ debate['fortext'] }}</p>
              </div>
              <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#confirmation-modal">
                View Full Analysis
              </button>
            </div>
          </div>
          <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="NaN">
            <div class="card card-body align-items-center">
              <div class="pt-md-2">
                <h4>Against Side</h4>
              </div>
              <div class="d-flex align-items-start pb-md-2">
                <span class="display-4 mb-0">{{ rate['against'] }}</span>
                <span class="h3">%</span>
              </div>
              <span class="text-small text-muted">winning rate</span>
              <p><br>{{ debate['againsttext'] }}</p>
              <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#confirmation-modal">
                View Full Analysis
              </button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col text-center">
            <span>Have different speeches? <a href="{{ url_for('demo.text') }}" class="hover-arrow">Try Again</a>
            </span>
          </div>
        </div>
      </div>
    </section>

    <div class="modal fade" id="confirmation-modal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <img class="icon bg-dark" src="{{ url_for('static', filename='img/icons/interface/cross.svg') }}" alt="cross interface icon" data-inject-svg />
            </button>
            <div class="m-xl-4 m-3">
              <div class="icon-round icon-round-lg bg-primary mx-auto mb-4">
                <img class="icon bg-primary" src=" {{ url_for('static', filename='img/icons/theme/communication/readed-mail.svg') }}" alt="readed-mail icon" data-inject-svg />
              </div>
              <div class="mb-4">
                <h4 class="text-center h3">Milk Tea Donation</h4>
                <p class="text-align-start">To access full, detailed analysis report from our engine, please donate us a cup of milk tea.
                We hope you enjoy our platform and really appreciate if you could <strong>star our<a href="https://github.com/maoli131/DebateStarWeb"> Github repo</a></strong>. Thanks!
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

{% endblock %}